<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; CONCEPT Documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="canonical" href="https://jmd-dk.github.io/concept/installation.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command-line options" href="command_line_options.html" />
    <link rel="prev" title="8. Comparison with GADGET-2" href="tutorial/gadget.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CO<em>N</em>CEPT
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search documentation" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial/tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/installation.html">1. Effortless installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/first_simulations.html">2. Your first simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/parameter_files.html">3. Working with parameter files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/gravity.html">4. Mastering gravity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/gravity.html#the-pm-method">4.1. The PM method</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/gravity.html#the-p3m-method">4.2. The PÂ³M method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/output_types.html">5. Other kinds of output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/output_types.html#d-renders">5.1. 3D renders</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/output_types.html#id1">5.2. 2D renders</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/output_types.html#snapshots">5.3. Snapshots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/working_remotely.html">6. Working on remote clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/beyond_matter_only.html">7. Beyond matter-only simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/beyond_matter_only.html#radiation">7.1. Radiation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/beyond_matter_only.html#massive-neutrinos">7.2. Massive neutrinos</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/beyond_matter_only.html#dynamical-dark-energy">7.3. Dynamical dark energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/beyond_matter_only.html#decaying-cold-dark-matter">7.4. Decaying cold dark matter</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/beyond_matter_only.html#non-linear-massive-neutrinos">7.5. Non-linear massive neutrinos</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/gadget.html">8. Comparison with GADGET-2</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#supported-platforms">Supported platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standard-installation">Standard installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#optimal-network-performance-on-clusters">Optimal network performance on clusters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cloning-with-git">Cloning with Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-install-script-in-depth">The <code class="docutils literal notranslate"><span class="pre">install</span></code> script in-depth</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#programs-installed">Programs installed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-options">Command-line options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#influential-environment-variables">Influential environment variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#making-use-of-pre-installed-libraries">Making use of pre-installed libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-dependency-versions">Specifying dependency versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-dependency-urls">Specifying dependency URLs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#choosing-compiler-precedence">Choosing compiler precedence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-mpich-or-openmpi">Installing MPICH or OpenMPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parallel-builds">Parallel builds</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-install-script-to-install-specific-libraries-but-not-concept-itself">Using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script to install specific libraries but not CO<em>N</em>CEPT itself</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-dependencies">Python dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-primary-dependencies">Other primary dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system-dependencies">System dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-path-and-env-files">The <code class="docutils literal notranslate"><span class="pre">.path</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-path-file">The <code class="docutils literal notranslate"><span class="pre">.path</span></code> file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-env-file">The <code class="docutils literal notranslate"><span class="pre">.env</span></code> file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#path-like-environment-variables"><code class="docutils literal notranslate"><span class="pre">PATH</span></code>-like environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eliminating-interference-from-foreign-python-installations">Eliminating interference from foreign Python installations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-mpi-executor">The <code class="docutils literal notranslate"><span class="pre">mpi_executor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-make-jobs-environment-variable">The <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> environment variable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="command_line_options.html">Command-line options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="command_line_options.html#basics">Basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#help-h-help">Help: <code class="docutils literal notranslate"><span class="pre">-h</span></code>, <code class="docutils literal notranslate"><span class="pre">--help</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#parameter-file-p-params">Parameter file: <code class="docutils literal notranslate"><span class="pre">-p</span></code>, <code class="docutils literal notranslate"><span class="pre">--params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#command-line-parameters-c-command-line-params">Command-line parameters: <code class="docutils literal notranslate"><span class="pre">-c</span></code>, <code class="docutils literal notranslate"><span class="pre">--command-line-params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#number-of-processes-n-nprocs">Number of processes: <code class="docutils literal notranslate"><span class="pre">-n</span></code>, <code class="docutils literal notranslate"><span class="pre">--nprocs</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="command_line_options.html#specifying-multiple-nodes">Specifying multiple nodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#utility-u-utility">Utility: <code class="docutils literal notranslate"><span class="pre">-u</span></code>, <code class="docutils literal notranslate"><span class="pre">--utility</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="command_line_options.html#remote-job-submission">Remote job submission</a><ul>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#queue-q-queue">Queue: <code class="docutils literal notranslate"><span class="pre">-q</span></code>, <code class="docutils literal notranslate"><span class="pre">--queue</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#wall-time-w-walltime">Wall time: <code class="docutils literal notranslate"><span class="pre">-w</span></code>, <code class="docutils literal notranslate"><span class="pre">--walltime</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#memory-memory">Memory: <code class="docutils literal notranslate"><span class="pre">--memory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#job-name-job-name">Job name: <code class="docutils literal notranslate"><span class="pre">--job-name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#job-directive-j-job-directive">Job directive: <code class="docutils literal notranslate"><span class="pre">-j</span></code>, <code class="docutils literal notranslate"><span class="pre">--job-directive</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#no-watching-no-watching">No watching: <code class="docutils literal notranslate"><span class="pre">--no-watching</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="command_line_options.html#other-modes-of-building-running">Other modes of building/running</a><ul>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#local-local">Local: <code class="docutils literal notranslate"><span class="pre">--local</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#pure-python-pure-python">Pure Python: <code class="docutils literal notranslate"><span class="pre">--pure-python</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#build-b-build">Build: <code class="docutils literal notranslate"><span class="pre">-b</span></code>, <code class="docutils literal notranslate"><span class="pre">--build</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#rebuild-rebuild">Rebuild: <code class="docutils literal notranslate"><span class="pre">--rebuild</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#native-optimizations-native-optimizations">Native optimizations: <code class="docutils literal notranslate"><span class="pre">--native-optimizations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#no-link-time-optimizations-no-lto">No link time optimizations: <code class="docutils literal notranslate"><span class="pre">--no-lto</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#no-optimizations-no-optimizations">No optimizations: <code class="docutils literal notranslate"><span class="pre">--no-optimizations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#unsafe-building-unsafe-building">Unsafe building: <code class="docutils literal notranslate"><span class="pre">--unsafe-building</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="command_line_options.html#specials">Specials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#test-t-tests">Test: <code class="docutils literal notranslate"><span class="pre">-t</span></code>, <code class="docutils literal notranslate"><span class="pre">--tests</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#main-entry-point-m-main">Main entry point: <code class="docutils literal notranslate"><span class="pre">-m</span></code>, <code class="docutils literal notranslate"><span class="pre">--main</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#interactive-i-interactive">Interactive: <code class="docutils literal notranslate"><span class="pre">-i</span></code>, <code class="docutils literal notranslate"><span class="pre">--interactive</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="command_line_options.html#version-v-version">Version: <code class="docutils literal notranslate"><span class="pre">-v</span></code>, <code class="docutils literal notranslate"><span class="pre">--version</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parameters/parameters.html">Parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="parameters/input_output.html">Input/output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#initial-conditions"><code class="docutils literal notranslate"><span class="pre">initial_conditions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#output-dirs"><code class="docutils literal notranslate"><span class="pre">output_dirs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#output-bases"><code class="docutils literal notranslate"><span class="pre">output_bases</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#output-times"><code class="docutils literal notranslate"><span class="pre">output_times</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#autosave-interval"><code class="docutils literal notranslate"><span class="pre">autosave_interval</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#snapshot-select"><code class="docutils literal notranslate"><span class="pre">snapshot_select</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#powerspec-select"><code class="docutils literal notranslate"><span class="pre">powerspec_select</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#render2d-select"><code class="docutils literal notranslate"><span class="pre">render2D_select</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#render3d-select"><code class="docutils literal notranslate"><span class="pre">render3D_select</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#snapshot-type"><code class="docutils literal notranslate"><span class="pre">snapshot_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#gadget-snapshot-params"><code class="docutils literal notranslate"><span class="pre">gadget_snapshot_params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#snapshot-wrap"><code class="docutils literal notranslate"><span class="pre">snapshot_wrap</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#select-particle-id"><code class="docutils literal notranslate"><span class="pre">select_particle_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#class-plot-perturbations"><code class="docutils literal notranslate"><span class="pre">class_plot_perturbations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#class-extra-background"><code class="docutils literal notranslate"><span class="pre">class_extra_background</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/input_output.html#class-extra-perturbations"><code class="docutils literal notranslate"><span class="pre">class_extra_perturbations</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/numerics.html">Numerics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/numerics.html#boxsize"><code class="docutils literal notranslate"><span class="pre">boxsize</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/numerics.html#potential-options"><code class="docutils literal notranslate"><span class="pre">potential_options</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/numerics.html#shortrange-params"><code class="docutils literal notranslate"><span class="pre">shortrange_params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/numerics.html#powerspec-options"><code class="docutils literal notranslate"><span class="pre">powerspec_options</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/numerics.html#k-modes-per-decade"><code class="docutils literal notranslate"><span class="pre">k_modes_per_decade</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/cosmology.html">Cosmology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#h0"><code class="docutils literal notranslate"><span class="pre">H0</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#b"><code class="docutils literal notranslate"><span class="pre">Î©b</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#cdm"><code class="docutils literal notranslate"><span class="pre">Î©cdm</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#a-begin"><code class="docutils literal notranslate"><span class="pre">a_begin</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#t-begin"><code class="docutils literal notranslate"><span class="pre">t_begin</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#primordial-spectrum"><code class="docutils literal notranslate"><span class="pre">primordial_spectrum</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/cosmology.html#class-params"><code class="docutils literal notranslate"><span class="pre">class_params</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/physics.html">Physics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/physics.html#select-forces"><code class="docutils literal notranslate"><span class="pre">select_forces</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/physics.html#select-species"><code class="docutils literal notranslate"><span class="pre">select_species</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/physics.html#realization-options"><code class="docutils literal notranslate"><span class="pre">realization_options</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/physics.html#select-lives"><code class="docutils literal notranslate"><span class="pre">select_lives</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/physics.html#softening-kernel"><code class="docutils literal notranslate"><span class="pre">softening_kernel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/physics.html#select-softening-length"><code class="docutils literal notranslate"><span class="pre">select_softening_length</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/simulation.html">Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#t-base-background-factor"><code class="docutils literal notranslate"><span class="pre">Ît_base_background_factor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#t-base-nonlinear-factor"><code class="docutils literal notranslate"><span class="pre">Ît_base_nonlinear_factor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#t-increase-max-factor"><code class="docutils literal notranslate"><span class="pre">Ît_increase_max_factor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#t-rung-factor"><code class="docutils literal notranslate"><span class="pre">Ît_rung_factor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#a-max-early"><code class="docutils literal notranslate"><span class="pre">Îa_max_early</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#a-max-late"><code class="docutils literal notranslate"><span class="pre">Îa_max_late</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#static-timestepping"><code class="docutils literal notranslate"><span class="pre">static_timestepping</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#n-rungs"><code class="docutils literal notranslate"><span class="pre">N_rungs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#fftw-wisdom-rigor"><code class="docutils literal notranslate"><span class="pre">fftw_wisdom_rigor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#fftw-wisdom-reuse"><code class="docutils literal notranslate"><span class="pre">fftw_wisdom_reuse</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#fftw-wisdom-share"><code class="docutils literal notranslate"><span class="pre">fftw_wisdom_share</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#random-seeds"><code class="docutils literal notranslate"><span class="pre">random_seeds</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#primordial-amplitude-fixed"><code class="docutils literal notranslate"><span class="pre">primordial_amplitude_fixed</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#primordial-phase-shift"><code class="docutils literal notranslate"><span class="pre">primordial_phase_shift</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#cell-centered"><code class="docutils literal notranslate"><span class="pre">cell_centered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#class-k-max"><code class="docutils literal notranslate"><span class="pre">class_k_max</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/simulation.html#class-reuse"><code class="docutils literal notranslate"><span class="pre">class_reuse</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/graphics.html">Graphics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/graphics.html#terminal-width"><code class="docutils literal notranslate"><span class="pre">terminal_width</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/graphics.html#enable-terminal-formatting"><code class="docutils literal notranslate"><span class="pre">enable_terminal_formatting</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/graphics.html#render2d-options"><code class="docutils literal notranslate"><span class="pre">render2D_options</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/graphics.html#render3d-colors"><code class="docutils literal notranslate"><span class="pre">render3D_colors</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/graphics.html#render3d-bgcolor"><code class="docutils literal notranslate"><span class="pre">render3D_bgcolor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/graphics.html#render3d-resolution"><code class="docutils literal notranslate"><span class="pre">render3D_resolution</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/units.html">Units</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/units.html#unit-length"><code class="docutils literal notranslate"><span class="pre">unit_length</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/units.html#unit-time"><code class="docutils literal notranslate"><span class="pre">unit_time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/units.html#unit-mass"><code class="docutils literal notranslate"><span class="pre">unit_mass</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameters/debugging.html">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameters/debugging.html#print-load-imbalance"><code class="docutils literal notranslate"><span class="pre">print_load_imbalance</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/debugging.html#particle-reordering"><code class="docutils literal notranslate"><span class="pre">particle_reordering</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/debugging.html#enable-hubble"><code class="docutils literal notranslate"><span class="pre">enable_Hubble</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters/debugging.html#enable-class-background"><code class="docutils literal notranslate"><span class="pre">enable_class_background</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities/utilities.html">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utilities/class.html">class utility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="utilities/class.html#basic-usage">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities/class.html#command-line-options">Command-line options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#help-h-help">Help: <code class="docutils literal notranslate"><span class="pre">-h</span></code>, <code class="docutils literal notranslate"><span class="pre">--help</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#minimum-fourier-mode-kmin">Minimum Fourier mode: <code class="docutils literal notranslate"><span class="pre">--kmin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#maximum-fourier-mode-kmax">Maximum Fourier mode: <code class="docutils literal notranslate"><span class="pre">--kmax</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#fourier-modes-modes">Fourier modes: <code class="docutils literal notranslate"><span class="pre">--modes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#times-times">Times: <code class="docutils literal notranslate"><span class="pre">--times</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#gauge-gauge">Gauge: <code class="docutils literal notranslate"><span class="pre">--gauge</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utilities/class.html#file-contents">File contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#data-layout">Data layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#extra-output">Extra output</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities/class.html#units">Units</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utilities/class.html#complete-example-massive-neutrinos">Complete example (massive neutrinos)</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities/class.html#running-through-docker">Running through Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities/class.html#tips-and-tricks">Tips and tricks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="utilities/convert.html">convert utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/gadget.html">gadget utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/info.html">info utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/play.html">play utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/powerspec.html">powerspec utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/render3D.html">render3D utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/update.html">update utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/watch.html">watch utility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#installation-failed">Installation failed</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#compilation-failed">Compilation failed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html#insufficient-memory">Insufficient memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html#dangerous-optimizations">Dangerous optimizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#terminal-colour-output-looks-weird">Terminal colour output looks weird</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#problems-related-to-python-libraries-and-packages">Problems related to Python libraries and packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#error-messages-containing-read-1">Error messages containing âRead -1â</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#clock-skew-and-or-modification-times-in-the-future">Clock skew and/or modification times in the future</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#mixed-compiled-and-pure-python-mode">Mixed compiled and pure Python mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#the-simulation-hangs-when-calling-class">The simulation hangs when calling CLASS</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#crashes-or-other-bad-behaviour">Crashes or other bad behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#problems-when-running-remotely">Problems when running remotely</a><ul>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html#choosing-an-mpi-executor">Choosing an MPI executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html#different-hardware-architecture-on-front-end-and-remote-node">Different hardware architecture on front-end and remote node</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html#it-still-does-not-work">It <em>still</em> does not work!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#bad-performance-when-using-multiple-processes-nodes">Bad performance when using multiple processes/nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#problems-when-using-multiple-nodes">Problems when using multiple nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publications.html#theses">Theses</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CO<em>N</em>CEPT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/jmd-dk/concept/" class="fa fa-github"> Code Repository</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">


  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">ï</a></h1>
<p>This page contains detailed information about how to install CO<em>N</em>CEPT
along with its many dependencies. Unless you have some special need, it is
recommended to just follow the simple,
<a class="reference internal" href="#standard-installation"><span class="std std-ref">standard installation</span></a> instructions, including
those covering how to obtain
<a class="reference internal" href="#optimal-network-performance-on-clusters"><span class="std std-ref">optimal network performance</span></a>
if you intend to install CO<em>N</em>CEPT on a cluster.</p>
<p>The <a class="reference internal" href="#standard-installation"><span class="std std-ref">standard</span></a> way of installing CO<em>N</em>CEPT
utilizes the <code class="docutils literal notranslate"><span class="pre">install</span></code> script to install CO<em>N</em>CEPT and all of its
dependencies. Many more details about how to use this script for more
customized installation is available under the
â<a class="reference internal" href="#the-install-script-in-depth"><span class="std std-ref">install script in-depth</span></a>â entry.</p>
<p>Though not recommended, you may choose to not make use of the <code class="docutils literal notranslate"><span class="pre">install</span></code>
script, in which case you need to install all of the
<a class="reference internal" href="#dependencies"><span class="std std-ref">dependencies</span></a> yourself. After
<a class="reference external" href="https://github.com/jmd-dk/concept">downloading</a> the CO<em>N</em>CEPT source
code, you then need to
<a class="reference internal" href="#the-path-and-env-files"><span class="std std-ref">specify environment information</span></a> by editing
the <code class="docutils literal notranslate"><span class="pre">.path</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> files.</p>
<p>Entries on this page:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#supported-platforms" id="id15">Supported platforms</a></p></li>
<li><p><a class="reference internal" href="#standard-installation" id="id16">Standard installation</a></p>
<ul>
<li><p><a class="reference internal" href="#optimal-network-performance-on-clusters" id="id17">Optimal network performance on clusters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cloning-with-git" id="id18">Cloning with Git</a></p></li>
<li><p><a class="reference internal" href="#the-install-script-in-depth" id="id19">The <code class="docutils literal notranslate"><span class="pre">install</span></code> script in-depth</a></p>
<ul>
<li><p><a class="reference internal" href="#programs-installed" id="id20">Programs installed</a></p></li>
<li><p><a class="reference internal" href="#command-line-options" id="id21">Command-line options</a></p></li>
<li><p><a class="reference internal" href="#influential-environment-variables" id="id22">Influential environment variables</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id23">Dependencies</a></p>
<ul>
<li><p><a class="reference internal" href="#python-dependencies" id="id24">Python dependencies</a></p></li>
<li><p><a class="reference internal" href="#other-primary-dependencies" id="id25">Other primary dependencies</a></p></li>
<li><p><a class="reference internal" href="#system-dependencies" id="id26">System dependencies</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-path-and-env-files" id="id27">The <code class="docutils literal notranslate"><span class="pre">.path</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> files</a></p>
<ul>
<li><p><a class="reference internal" href="#the-path-file" id="id28">The <code class="docutils literal notranslate"><span class="pre">.path</span></code> file</a></p></li>
<li><p><a class="reference internal" href="#the-env-file" id="id29">The <code class="docutils literal notranslate"><span class="pre">.env</span></code> file</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="supported-platforms">
<span id="id1"></span><h2><a class="toc-backref" href="#id15">Supported platforms</a><a class="headerlink" href="#supported-platforms" title="Permalink to this headline">ï</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0"><img alt="linux" src="_images/linux.png" style="height: 35px;" /> <span class="math notranslate nohighlight">\(\,\,\)</span> Linux</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1"><img alt="windows" src="_images/windows.png" style="height: 35px;" /> <span class="math notranslate nohighlight">\(\,\,\)</span> Windows</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1"><img alt="macos" src="_images/macos.png" style="height: 35px;" /> <span class="math notranslate nohighlight">\(\,\,\)</span> macOS</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1"><img alt="docker" src="_images/docker.png" style="height: 35px;" /> <span class="math notranslate nohighlight">\(\,\,\)</span> Docker</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>CO<em>N</em>CEPT should be <a class="reference internal" href="#standard-installation"><span class="std std-ref">trivial to install</span></a>
on all major Linux distributions. The system may be a laptop, a
workstation, a massively parallel computer cluster, a Raspberry Pi,
a virtual machine, etc.</p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>Though CO<em>N</em>CEPT does not run natively on Windows, support is
obtained via the
<a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/about">Windows Subsytem for Linux</a>.
If installing CO<em>N</em>CEPT on Windows this way, make sure to install it
into a proper Linux directory (e.g. your home directory <code class="docutils literal notranslate"><span class="pre">~</span></code>) and not a
Windows directory (e.g. <code class="docutils literal notranslate"><span class="pre">/mnt/c/...</span></code>).</p>
<p>The more traditional approach of installing Linux in a virtual machine
within Windows, or running CO<em>N</em>CEPT through Docker, of course works
too.</p>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p>Currently the only means of running CO<em>N</em>CEPT on a mac are either to
install it within a virtual Linux machine or run it through Docker.</p>
<p>Though much of the POSIX infrastructure needed to install and run
CO<em>N</em>CEPT is available to macOS via <a class="reference external" href="https://brew.sh/">Homebrew</a>,
numerous incompatibilities between the GNU and BSD tools make the
porting to macOS non-trivial.</p>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><p>You may wish to run CO<em>N</em>CEPT through one of the provided
<a class="reference external" href="https://hub.docker.com/r/jmddk/concept/">Docker images</a>, freeing you
from the installation process entirely (assuming you have
<a class="reference external" href="https://www.docker.com/">Docker</a> already installed).</p>
<p>To start a Docker container based on the latest CO<em>N</em>CEPT Docker
image, do e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span><span class="s2">:/concept/output&quot;</span><span class="w"> </span>jmddk/concept
</pre></div>
</div>
<p>Any files dumped in the CO<em>N</em>CEPT <code class="docutils literal notranslate"><span class="pre">output</span></code> directory will then
persist in your current directory after the Docker container is stopped.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If running Windows, the above command is valid within
<a class="reference external" href="https://docs.microsoft.com/powershell/">PowerShell</a>, not
<a class="reference external" href="https://docs.microsoft.com/windows-server/administration/windows-commands/windows-commands">CMD</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While running CO<em>N</em>CEPT via Docker is great for experimental use,
<a class="reference internal" href="#standard-installation"><span class="std std-ref">proper installation</span></a> on a Linux host is
preferable for running large simulations, ensuring maximum
performance.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>All available
<a class="reference external" href="https://hub.docker.com/r/jmddk/concept/">Docker images</a> are based
on <a class="reference external" href="https://hub.docker.com/_/debian">Debian</a>. If you want access to
additional software (e.g. Git or a text editor) within a Docker
container, first run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>ca-certificates<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>ca-certificates
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>apt-utils
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>gfortran
</pre></div>
</div>
<p>after which you may search for software packages to install using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt<span class="w"> </span>search<span class="w"> </span>&lt;keyword&gt;
</pre></div>
</div>
<p>and install a package using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>&lt;package&gt;
</pre></div>
</div>
<p>Note that the default user (<code class="docutils literal notranslate"><span class="pre">concept</span></code>) has root access via <code class="docutils literal notranslate"><span class="pre">sudo</span></code>
with no password required.</p>
</div>
</div></div>
</section>
<section id="standard-installation">
<span id="id3"></span><h2><a class="toc-backref" href="#id16">Standard installation</a><a class="headerlink" href="#standard-installation" title="Permalink to this headline">ï</a></h2>
<p>The easiest way to install CO<em>N</em>CEPT along with all of its dependencies is
to use the CO<em>N</em>CEPT <code class="docutils literal notranslate"><span class="pre">install</span></code> Bash script. This script is part of the
CO<em>N</em>CEPT source code, and so if you have CO<em>N</em>CEPT already
<a class="reference external" href="https://github.com/jmd-dk/concept">downloaded</a>, you may locate and run
this script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>install
</pre></div>
</div>
<p>However, the simplest way to run the script is to just execute</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">concept_version</span><span class="o">=</span>v1.0.1
bash<span class="w"> </span>&lt;<span class="o">(</span>wget<span class="w"> </span>-O-<span class="w"> </span>https://raw.githubusercontent.com/jmd-dk/concept/<span class="si">${</span><span class="nv">concept_version</span><span class="si">}</span>/install<span class="o">)</span>
</pre></div>
</div>
<p>in a terminal, which will fetch and run the <code class="docutils literal notranslate"><span class="pre">install</span></code> script directly from
the CO<em>N</em>CEPT GitHub repository, specifically version 1.0.1. Check out the
CO<em>N</em>CEPT
<a class="reference external" href="https://github.com/jmd-dk/concept/releases">releases</a> for other available
release versions, or use <code class="docutils literal notranslate"><span class="pre">concept_version=master</span></code> for the absolute newest
(and unstable!) version.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The initial <code class="docutils literal notranslate"><span class="pre">bash</span></code> in the above commands is required regardless of your
shell</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your system may fail to verify the certificate of the domain name
(<code class="docutils literal notranslate"><span class="pre">raw.githubusercontent.com</span></code>), causing <code class="docutils literal notranslate"><span class="pre">wget</span></code> to refuse the download.
If you encounter this issue, you can supply <code class="docutils literal notranslate"><span class="pre">--no-check-certificate</span></code> as a
further option to <code class="docutils literal notranslate"><span class="pre">wget</span></code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are installing CO<em>N</em>CEPT on a cluster, you should make sure to
obtain
<a class="reference internal" href="#optimal-network-performance-on-clusters"><span class="std std-ref">optimal network performance</span></a>.
If you are installing via the clusterâs front-end over SSH, you may want to
make use of a tool such as <a class="reference external" href="https://github.com/tmux/tmux/wiki">tmux</a> or
<a class="reference external" href="https://www.gnu.org/software/screen/">Screen</a>, so that you may close the
connection without stopping the installation process.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the remainder of this page, we shall make use of the shorter
<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">install</span></code> syntax, but here the local file â<code class="docutils literal notranslate"><span class="pre">install</span></code>â may
always be substituted with the online â<code class="docutils literal notranslate"><span class="pre">&lt;(wget</span> <span class="pre">...)</span></code>â version.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> script will prompt you for an installation directory, as well
as for permission to install each
<a class="reference internal" href="#system-dependencies"><span class="std std-ref">system dependency</span></a>, should any be missing. At the
very beginning of the installation, a table of software to be installed will
be shown.</p>
<p>Should the installation process end prematurely (e.g. if you kill
it yourself), simply rerun the same installation command and it will pick up
from where it was.</p>
<p>CO<em>N</em>CEPT along with all of the libraries it needs will be installed into
the chosen installation directory. To completely remove the CO<em>N</em>CEPT
installation, simply remove this directory.</p>
<p>The installation will take a couple of hours on modern hardware. When
installing onto a cluster, this time is increased as the default policy of the
<code class="docutils literal notranslate"><span class="pre">install</span></code> script is to then not build in parallel, though this can
<a class="reference internal" href="#parallel-builds"><span class="std std-ref">be changed</span></a>.</p>
<p>For each program, the <code class="docutils literal notranslate"><span class="pre">install</span></code> script will attempt the installation using
various combinations of flags until a successful set is found. For
this reason, installing CO<em>N</em>CEPT on atypical systems (e.g. non-x86) may
take a lot longer.</p>
<p>The fully installed CO<em>N</em>CEPT distribution takes up about 1.6 GB
of storage. This can be reduced to about 0.3 GB if installing in âslimâ mode,
see the <code class="docutils literal notranslate"><span class="pre">--slim</span></code> <a class="reference internal" href="#command-line-options"><span class="std std-ref">command-line option</span></a>.</p>
<section id="optimal-network-performance-on-clusters">
<span id="id4"></span><h3><a class="toc-backref" href="#id17">Optimal network performance on clusters</a><a class="headerlink" href="#optimal-network-performance-on-clusters" title="Permalink to this headline">ï</a></h3>
<p>To install CO<em>N</em>CEPT on a cluster, the standard installation procedure
above may be used. However, the performance of simulations running on multiple
CPUs may be very poor, as the MPI library installed by the <code class="docutils literal notranslate"><span class="pre">install</span></code> script
may not be configured optimally regarding the network and accompanying
software present on the cluster.</p>
<p>To test the network performance of MPI, you may simply run a small simulation
using 1, 2 and 4 processes. If the various timings printed out by the code
increases significantly as you increase the number of processes, you are
affected by this issue. Furthermore, running a simulation on 2 nodes each with
2 processes should not be significantly slower than running on a single node
with 4 processes, at least not if your cluster features a high-speed network
such as InfiniBand.</p>
<p>If you are affected by this issue, it is recommended to reinstall
CO<em>N</em>CEPT using an MPI library already present on the cluster, presumably
configured optimally by the system administrator. To do this, simply set the
<code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code> variable to the directory containing this MPI library when
invoking the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">mpi_dir</span><span class="o">=</span>/path/to/mpi<span class="w"> </span>bash<span class="w"> </span>install
</pre></div>
</div>
<p>It is important that your environment is set up so that the MPI installation
in question is runnable, meaning e.g. that <code class="docutils literal notranslate"><span class="pre">/path/to/mpi/bin/mpicc</span></code> works.
On clusters this often requires enabling MPI through something like the
<code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span></code> command.</p>
<p>Note that you <em>will</em> have to reinstall CO<em>N</em>CEPT and its dependencies in
their entirety, if you want to swap out the MPI library.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have <code class="docutils literal notranslate"><span class="pre">/path/to/mpi/bin</span></code> already in your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> you may use
simply</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">mpi_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>which<span class="w"> </span>mpicc<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>bash<span class="w"> </span>install
</pre></div>
</div>
<p>Though <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">mpicc</span></code> does not evaluate exactly to <code class="docutils literal notranslate"><span class="pre">/path/to/mpi</span></code>, it
is close enough that the <code class="docutils literal notranslate"><span class="pre">install</span></code> script understands it.</p>
</div>
<p>For the MPI implementation, CO<em>N</em>CEPT officially supports MPICH and
OpenMPI, though it should not matter much (CO<em>N</em>CEPT has been successfully
tested on MVAPICH and Spectrum MPI). What is important is that the MPI library
used conforms to the MPI-3 (or MPI-3.1) standard.</p>
</section>
</section>
<section id="cloning-with-git">
<h2><a class="toc-backref" href="#id18">Cloning with Git</a><a class="headerlink" href="#cloning-with-git" title="Permalink to this headline">ï</a></h2>
<p>For installing CO<em>N</em>CEPT, cloning the code repository is not needed, as
a copy of the code (without Git history) is downloaded during
<a class="reference internal" href="#standard-installation"><span class="std std-ref">installation</span></a>.</p>
<p>If however you wish to work with a full clone of the CO<em>N</em>CEPT
<a class="reference external" href="https://github.com/jmd-dk/concept/">code repository</a>, the easiest way to do
so is to first install the master version of CO<em>N</em>CEPT <em>without</em> Git,
following the
<a class="reference internal" href="#standard-installation"><span class="std std-ref">standard installation instructions</span></a>. Once
CO<em>N</em>CEPT is installed, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> the online CO<em>N</em>CEPT repository
into a temporary directory and simply drop the <code class="docutils literal notranslate"><span class="pre">.git</span></code> subdirectory into the
root of your CO<em>N</em>CEPT installation.</p>
<p>The above can be achieved from within the CO<em>N</em>CEPT installation directory
using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/jmd-dk/concept.git<span class="w"> </span>git
mv<span class="w"> </span>git/.git<span class="w"> </span>.
rm<span class="w"> </span>-rf<span class="w"> </span>git
</pre></div>
</div>
<p>If you now do a</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>status
</pre></div>
</div>
<p>it should detect changes to the <code class="docutils literal notranslate"><span class="pre">.path</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code>
<a class="reference internal" href="#the-path-and-env-files"><span class="std std-ref">files</span></a> only. These changes represent
customizations carried out during installation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you do not want Git to show the local changes to the <code class="docutils literal notranslate"><span class="pre">.path</span></code> and
<code class="docutils literal notranslate"><span class="pre">.env</span></code> files, you can tell Git to ignore these. The recommended way of
doing so is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="nb">source</span><span class="w"> </span>concept<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>stash<span class="w"> </span>push<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">env</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-m<span class="w"> </span>path-env<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>stash<span class="w"> </span>apply<span class="w"> </span>stash^<span class="o">{</span>/path-env<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>update-index<span class="w"> </span>--skip-worktree<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">env</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>status<span class="w"> </span><span class="se">\</span>
<span class="o">)</span>
</pre></div>
</div>
<p>Should you need to undo this, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="nb">source</span><span class="w"> </span>concept<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>update-index<span class="w"> </span>--no-skip-worktree<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">env</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>If you need to explicitly (re)insert the <code class="docutils literal notranslate"><span class="pre">.path</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> files
(e.g. because you changed to a different branch), you can use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>stash<span class="w"> </span>apply<span class="w"> </span>stash^<span class="o">{</span>/path-env<span class="o">}</span>
</pre></div>
</div>
</div>
</section>
<section id="the-install-script-in-depth">
<span id="id5"></span><h2><a class="toc-backref" href="#id19">The <code class="docutils literal notranslate"><span class="pre">install</span></code> script in-depth</a><a class="headerlink" href="#the-install-script-in-depth" title="Permalink to this headline">ï</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> script may be run with additional options or influential
environment variables, which can be used to e.g. request for a specific
version of a dependency to be installed, or to skip the installation of a
particular dependency and instead make use of a pre-installed version of the
same library. Before discussing such features, it is good to know exactly
what dependencies are installed.</p>
<section id="programs-installed">
<h3><a class="toc-backref" href="#id20">Programs installed</a><a class="headerlink" href="#programs-installed" title="Permalink to this headline">ï</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> script partitions all dependencies into <em>library</em> and <em>system</em>
dependencies. Unless explicitly specified, the <code class="docutils literal notranslate"><span class="pre">install</span></code> script installs all
library dependencies regardless of whether these already exist on the system.
The system dependencies consist of standard tools commonly installed
system-wide. If the <code class="docutils literal notranslate"><span class="pre">install</span></code> script detects a missing system dependency, it
will prompt for system-wide (root) installation through the package manager on
the system.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> script is able to bootstrap itself up from just Bash, GNU
Core Utilities and a package manager (or just Bash and GNU Core Utilities if
all system dependencies are already present). In addition, it builds all
library dependencies from source, increasing the total number of dependencies
(as many dependencies have other dependencies, and so on). For the absolute
minimum dependency requirements needed to <em>run</em> CO<em>N</em>CEPT, see the
<a class="reference internal" href="#dependencies"><span class="std std-ref">Dependencies</span></a> entry.</p>
<p>The complete set of system dependencies needed/installed by the <code class="docutils literal notranslate"><span class="pre">install</span></code>
script is:</p>
<ul class="simple">
<li><p><strong>GNU tools</strong>: AWK, grep, sed, Gzip, Tar, Wget.</p></li>
<li><p><strong>Build tools</strong>: GCC, g++, gfortran, glibc, GNU Make, as and ld (binutils),
Linux headers.</p></li>
</ul>
<p>The complete list of all library dependencies (and their dependency relations)
installed by the <code class="docutils literal notranslate"><span class="pre">install</span></code> script is given below:</p>
<ul class="simple">
<li><p><strong>zlib</strong></p></li>
<li><p><strong>Perl</strong></p></li>
<li><p><strong>BLAS</strong> and <strong>LAPACK</strong></p></li>
<li><p><strong>MPI</strong></p></li>
<li><p><strong>FFTW 3</strong></p></li>
<li><p><strong>FFTW 2</strong></p></li>
<li><p><strong>ncurses</strong></p></li>
<li><p><strong>libffi</strong></p></li>
<li><p><strong>OpenSSL</strong> (depends on Perl)</p></li>
<li><p><strong>GSL</strong> (depends on BLAS)</p></li>
<li><p><strong>HDF5</strong> (depends on zlib)</p></li>
<li><p><strong>GADGET-2</strong> (depends on MPI, GSL, FFTW 2)</p></li>
<li><p><strong>Python 3</strong> (depends on zlib)</p>
<ul>
<li><p><strong>pip</strong> (depends on OpenSSL, libffi), <strong>setuptools</strong> and <strong>wheel</strong>;
needed to install the Python packages below:</p>
<ul>
<li><p><strong>Blessings</strong> (depends on ncurses)</p></li>
<li><p><strong>Cython</strong></p></li>
<li><p><strong>CythonGSL</strong> (depends on Cython, GSL)</p></li>
<li><p><strong>NumPy</strong> (depends on BLAS, LAPACK)</p></li>
<li><p><strong>SciPy</strong> (depends on BLAS, LAPACK)</p></li>
<li><p><strong>Matplotlib</strong></p></li>
<li><p><strong>MPI4Py</strong> (depends on MPI, Cython)</p></li>
<li><p><strong>H5Py</strong> (depends on HDF5 and MPI)</p></li>
<li><p><strong>Sphinx</strong></p></li>
<li><p><strong>Sphinx-copybutton</strong> (depends on Sphinx)</p></li>
<li><p><strong>Sphinx-rtd-theme</strong> (depends on Sphinx)</p></li>
<li><p><strong>Sphinx-tabs</strong> (depends on Sphinx)</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>CLASS</strong> + <strong>classy</strong> (depends on Cython, NumPy)</p></li>
</ul>
<p>Finally, CO<em>N</em>CEPT itself depends directly on MPI, FFTW (3), GADGET-2,
Python, Blessings, Cython, CythonGSL, NumPy, SciPy, Matplotlib, MPI4Py, H5Py,
classy. For testing, CO<em>N</em>CEPT additionally needs GADGET-2, and building
documentation requires Sphinx, sphinx-copybutton, sphinx-rtd-theme,
sphinx-tabs.</p>
<p>Many of the above Python packages have other Python packages as dependencies,
and so the truly complete list of these is in fact much larger. This is mostly
a non-issue, as such Python package dependencies are generally auto-installed
when installing Python packages with <a class="reference external" href="https://pip.pypa.io/">pip</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> script installs the
<a class="reference external" href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a> library (which depends on
Perl) in order to provide both BLAS and LAPACK. For MPI,
<a class="reference external" href="https://www.mpich.org/">MPICH</a>
(<a class="reference internal" href="#installing-mpich-or-openmpi"><span class="std std-ref">default</span></a>) or
<a class="reference external" href="https://www.open-mpi.org/">OpenMPI</a> is installed (both depends on Perl). If
tests are to be performed during the installation (see the <code class="docutils literal notranslate"><span class="pre">--tests</span></code>
<a class="reference internal" href="#command-line-options"><span class="std std-ref">command-line option</span></a> to <code class="docutils literal notranslate"><span class="pre">concept</span></code>), the pytest
and Hypothesis Python packages will additionally be installed (needed for
testing e.g. NumPy).</p>
</section>
<section id="command-line-options">
<span id="id6"></span><h3><a class="toc-backref" href="#id21">Command-line options</a><a class="headerlink" href="#command-line-options" title="Permalink to this headline">ï</a></h3>
<p>When invoking the <code class="docutils literal notranslate"><span class="pre">install</span></code> script â whether a local copy or directly off
of GitHub â you may supply optional command-line arguments, the most useful
of which is probably the installation path. That is,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>install<span class="w"> </span>/path/to/concept
</pre></div>
</div>
<p>will not prompt you for an installation directory but instead use the supplied
<code class="docutils literal notranslate"><span class="pre">/path/to/concept</span></code>.</p>
<p>Other command-line options to the <code class="docutils literal notranslate"><span class="pre">install</span></code> script are listed below.</p>
<h6>
  Help:
  <code class="docutils literal notranslate"><span class="pre">
    -h
  </span></code>
  ,
  <code class="docutils literal notranslate"><span class="pre">
    --help
  </span></code>
</h6><p>This prints out a short description of how to use the <code class="docutils literal notranslate"><span class="pre">install</span></code> script
and then exits. Generally though, this documentation page is preferable.</p>
<h6>
  Tests:
  <code class="docutils literal notranslate"><span class="pre">
    -t
  </span></code>
  ,
  <code class="docutils literal notranslate"><span class="pre">
    --tests
  </span></code>
</h6><p>With this option, close to all dependency programs will be tested after their
individual installations. CO<em>N</em>CEPT itself will similarly be tested. On
failure (fatal or non-fatal) of any test, a log file of the test output will
be placed in the installation subdirectory of the given program. Any test
failures will be reported at the end of the entire installation process.</p>
<p>This option is helpful for debugging if it is known that the installation
results in a non-functioning CO<em>N</em>CEPT, but it is unknown which of the
many dependencies does not function correctly. Generally though, this option
is not recommended as it increases the installation time by a couple of hours.</p>
<p>The tests performed on the CO<em>N</em>CEPT code itself are those of</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./concept<span class="w"> </span>-t<span class="w"> </span>all
</pre></div>
</div>
<p>and so may also be run at any time after the installation, whether or not the
<code class="docutils literal notranslate"><span class="pre">--tests</span></code> option was used for the installation. See the <code class="docutils literal notranslate"><span class="pre">concept</span></code>
<a class="reference internal" href="command_line_options.html#test"><span class="std std-ref">test</span></a> command-line option for further details.</p>
<h6>
  Yes to defaults:
  <code class="docutils literal notranslate"><span class="pre">
    -y
  </span></code>
  ,
  <code class="docutils literal notranslate"><span class="pre">
    --yes-to-defaults
  </span></code>
</h6><p>Assume âyesâ as answer to all prompts (accept defaults) and run
non-interactively. These include system-wide installations of system
dependencies (should any be missing), which require root access.
Also, any other already running CO<em>N</em>CEPT installation process will be
terminated on sight.</p>
<h6>
  Slim:
  <code class="docutils literal notranslate"><span class="pre">
    --slim
  </span></code>
</h6><p>This produces a slimmed down installation with uncritical content removed,
both from CO<em>N</em>CEPT itself and its dependency programs. This brings the
size of the installation down from about 1.6 GB to about 0.3 GB. Though
CO<em>N</em>CEPT itself remains fully functional in such a slim installation,
some features of the dependency programs will be broken. Debugging any issues
encountered will also generally be harder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The provided CO<em>N</em>CEPT <a class="reference internal" href="#supported-platforms"><span class="std std-ref">Docker images</span></a> are
built using a slim installation</p>
</div>
<p>Below we list the exact changes caused by the <code class="docutils literal notranslate"><span class="pre">--slim</span></code> option.</p>
<ul class="simple">
<li><p><strong>Fewer license and acknowledgement files</strong>: During normal installation, all
recognised license and acknowledgement files for the various dependencies
(and CO<em>N</em>CEPT itself) are copied over to the respective installation
directories. This is now skipped.</p></li>
<li><p><strong>Less documentation</strong>: Most documentation (full-blown documentation,
READMEâs, changelogs, etc.) for the dependency programs will be removed. The
documentation for CO<em>N</em>CEPT itself (these pages) will not be built but
remains available as source.</p></li>
<li><p><strong>Fewer example and test files</strong>: Example files demonstrating how to use the
various dependency programs, as well as test suites for demonstrating their
correctness, will be removed.</p></li>
<li><p><strong>Fewer dependency programs</strong>: Some dependency programs are only strictly
needed during installation of the dependency stack, not for running
CO<em>N</em>CEPT itself. These will be completely removed. The dependencies in
question are: Perl, zlib.</p></li>
<li><p><strong>No static libraries of the dependency programs</strong>: All static library files
belonging to the installed dependencies will be removed, meaning that any
further linking against these must be done using <em>shared</em> libraries
(if available).</p></li>
<li><p><strong>Fewer symbols in binaries</strong>: The majority of all binary files will have
their symbol table stripped.</p></li>
<li><p><strong>Fewer configuration files</strong>: The majority of configuration files
describing the installation of the dependencies will be removed.</p></li>
<li><p><strong>No cached Python files</strong>: All bytecode files compiled and cached by Python
during installation will be removed.</p></li>
<li><p><strong>No compilation artefacts from CO</strong><span class="bolditalic">N</span><strong>CEPT and CLASS</strong>:
Only the final shared object files (as well as the bare source) resulting
from compilation of CO<em>N</em>CEPT and CLASS will be present after
installation.</p></li>
</ul>
<h6>
  Fix SSH:
  <code class="docutils literal notranslate"><span class="pre">
    --fix-ssh
  </span></code>
</h6><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do <em>not</em> use this option if you seek to install CO<em>N</em>CEPT</p>
</div>
<p>Invoking the <code class="docutils literal notranslate"><span class="pre">install</span></code> script with this option will not install
CO<em>N</em>CEPT, but instead attempt to configure the local <code class="docutils literal notranslate"><span class="pre">~/.ssh</span></code> directory
of the user for use with remote jobs running on multiple nodes, as described
<a class="reference internal" href="troubleshooting.html#problems-when-using-multiple-nodes"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="influential-environment-variables">
<span id="id7"></span><h3><a class="toc-backref" href="#id22">Influential environment variables</a><a class="headerlink" href="#influential-environment-variables" title="Permalink to this headline">ï</a></h3>
<p>The behaviour of the <code class="docutils literal notranslate"><span class="pre">install</span></code> script is governed by a large set of
environment variables. An example is the <code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code> variable described in
â<a class="reference internal" href="#optimal-network-performance-on-clusters"><span class="std std-ref">optimal network performance on clusters</span></a>â,
through which we can let the <code class="docutils literal notranslate"><span class="pre">install</span></code> script make use of a pre-installed
MPI library, rather than letting it install one itself. We can specify
<code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code> either directly in the invocation of <code class="docutils literal notranslate"><span class="pre">install</span></code>;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">mpi_dir</span><span class="o">=</span>/path/to/mpi<span class="w"> </span>bash<span class="w"> </span>install
</pre></div>
</div>
<p>or defining it as an environment variable prior to the invocation;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">mpi_dir</span><span class="o">=</span>/path/to/mpi<span class="w">  </span><span class="c1"># assuming Bash-like shell</span>
bash<span class="w"> </span>install
</pre></div>
</div>
<p>All other influential environment variables may be set in similar ways.</p>
<section id="making-use-of-pre-installed-libraries">
<span id="making-use-of-preinstalled-libraries"></span><h4>Making use of pre-installed libraries<a class="headerlink" href="#making-use-of-pre-installed-libraries" title="Permalink to this headline">ï</a></h4>
<p>To make the <code class="docutils literal notranslate"><span class="pre">install</span></code> script make use of a pre-installed library rather than
installing it itself, you must set the corresponding <code class="docutils literal notranslate"><span class="pre">*_dir</span></code> variable. The
complete list of such variables is: <code class="docutils literal notranslate"><span class="pre">blas_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">class_dir</span></code>,
<code class="docutils literal notranslate"><span class="pre">concept_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">fftw_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">fftw_for_gadget_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">gadget_dir</span></code>,
<code class="docutils literal notranslate"><span class="pre">gsl_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">hdf5_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">libffi_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">ncurses_dir</span></code>,
<code class="docutils literal notranslate"><span class="pre">openssl_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">perl_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">python_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">zlib_dir</span></code>.</p>
<p>Note that if using a pre-installed Python distribution â
<code class="docutils literal notranslate"><span class="pre">python_dir=/path/to/python</span></code> â OpenSSL, libffi and ncurses are assumed to
be already installed and built into the Python distribution, as these cannot
be tacked on after Python is build. Also, Python should come with at least pip
built-in. The <code class="docutils literal notranslate"><span class="pre">install</span></code> script will install any other missing
Python packages.</p>
<p>If e.g. <code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code> is set, the value of <code class="docutils literal notranslate"><span class="pre">mpi_version</span></code> is not used.</p>
</section>
<section id="specifying-dependency-versions">
<span id="id8"></span><h4>Specifying dependency versions<a class="headerlink" href="#specifying-dependency-versions" title="Permalink to this headline">ï</a></h4>
<p>The version of each dependency (and CO<em>N</em>CEPT itself) to install is
specified near the top of the <code class="docutils literal notranslate"><span class="pre">install</span></code> script (look for âSpecification
of software versionsâ). You may direct the <code class="docutils literal notranslate"><span class="pre">install</span></code> script to use other
versions through the <code class="docutils literal notranslate"><span class="pre">*_version</span></code> variables. As with the <code class="docutils literal notranslate"><span class="pre">*_dir</span></code>
<a class="reference internal" href="#making-use-of-preinstalled-libraries"><span class="std std-ref">variables</span></a>, these include
<code class="docutils literal notranslate"><span class="pre">blas_version</span></code>, <code class="docutils literal notranslate"><span class="pre">class_version</span></code>, <code class="docutils literal notranslate"><span class="pre">concept_version</span></code>, <code class="docutils literal notranslate"><span class="pre">fftw_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">fftw_for_gadget_version</span></code>, <code class="docutils literal notranslate"><span class="pre">gadget_version</span></code>, <code class="docutils literal notranslate"><span class="pre">gsl_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">hdf5_version</span></code>, <code class="docutils literal notranslate"><span class="pre">libffi_version</span></code>, <code class="docutils literal notranslate"><span class="pre">mpi_version</span></code>, <code class="docutils literal notranslate"><span class="pre">ncurses_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">openssl_version</span></code>, <code class="docutils literal notranslate"><span class="pre">perl_version</span></code>, <code class="docutils literal notranslate"><span class="pre">python_version</span></code>, <code class="docutils literal notranslate"><span class="pre">zlib_version</span></code>.
Furthermore, each Python package also has a version, specified by
<code class="docutils literal notranslate"><span class="pre">blessings_version</span></code>, <code class="docutils literal notranslate"><span class="pre">cython_version</span></code>, <code class="docutils literal notranslate"><span class="pre">cythongsl_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">h5py_version</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib_version</span></code>, <code class="docutils literal notranslate"><span class="pre">mpi4py_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">numpy_version</span></code>, <code class="docutils literal notranslate"><span class="pre">pip_version</span></code>, <code class="docutils literal notranslate"><span class="pre">scipy_version</span></code>, <code class="docutils literal notranslate"><span class="pre">setuptools_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">sphinx_version</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx_copybutton_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">sphinx_rtd_theme_version</span></code>, <code class="docutils literal notranslate"><span class="pre">sphinx_tabs_version</span></code>, <code class="docutils literal notranslate"><span class="pre">wheel_version</span></code>.</p>
</section>
<section id="specifying-dependency-urls">
<h4>Specifying dependency URLs<a class="headerlink" href="#specifying-dependency-urls" title="Permalink to this headline">ï</a></h4>
<p>When a <code class="docutils literal notranslate"><span class="pre">*_dir</span></code> <a class="reference internal" href="#making-use-of-preinstalled-libraries"><span class="std std-ref">variable</span></a> is
not set for a dependency (or CO<em>N</em>CEPT itself), the <code class="docutils literal notranslate"><span class="pre">install</span></code> script
will download the source code of the dependency using a pre-defined URL.
Of course, the exact URL needs to factor in the version of the dependency,
and so this depends on the corresponding <code class="docutils literal notranslate"><span class="pre">*_version</span></code>
<a class="reference internal" href="#specifying-dependency-versions"><span class="std std-ref">variable</span></a>. If you wish to install some
non-standard version of a given dependency, you can provide the corresponding
<code class="docutils literal notranslate"><span class="pre">*_url</span></code> variable yourself. This should point to some downloadable archive
(<code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>, <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, etc.). The complete list of <code class="docutils literal notranslate"><span class="pre">*_url</span></code> variables is:
<code class="docutils literal notranslate"><span class="pre">blas_url</span></code>, <code class="docutils literal notranslate"><span class="pre">class_url</span></code>, <code class="docutils literal notranslate"><span class="pre">concept_url</span></code>, <code class="docutils literal notranslate"><span class="pre">fftw_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">fftw_for_gadget_url</span></code>, <code class="docutils literal notranslate"><span class="pre">gadget_url</span></code>, <code class="docutils literal notranslate"><span class="pre">gsl_url</span></code>, <code class="docutils literal notranslate"><span class="pre">hdf5_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">libffi_url</span></code>, <code class="docutils literal notranslate"><span class="pre">mpi_url</span></code>, <code class="docutils literal notranslate"><span class="pre">ncurses_url</span></code>, <code class="docutils literal notranslate"><span class="pre">openssl_url</span></code>, <code class="docutils literal notranslate"><span class="pre">perl_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">python_url</span></code>, <code class="docutils literal notranslate"><span class="pre">zlib_url</span></code>.</p>
</section>
<section id="choosing-compiler-precedence">
<h4>Choosing compiler precedence<a class="headerlink" href="#choosing-compiler-precedence" title="Permalink to this headline">ï</a></h4>
<p>At the beginning of the installation, the <code class="docutils literal notranslate"><span class="pre">install</span></code> script will locate the
various compilers on the system. Its findings are presented under the
âCompiler precedenceâ heading. If the installation of a given program fails,
the <code class="docutils literal notranslate"><span class="pre">install</span></code> script moves on to the next compiler and tries again,
and so on. This is part of the overall philosophy of the <code class="docutils literal notranslate"><span class="pre">install</span></code> script to
âtry, try againâ if a particular choice of compiler/flags/etc. does
not succeed. This is one reason why the installation can be so time consuming.
It does however make the installation process very robust.</p>
<p>If you wish to have a say in the order in which the compilers are tried out,
you may define the <code class="docutils literal notranslate"><span class="pre">compiler_precedence</span></code> variable. To prefer e.g. Intel
compilers and then GNU compilers, set <code class="docutils literal notranslate"><span class="pre">compiler_precedence=&quot;intel</span> <span class="pre">gnu&quot;</span></code>.
Only compilers found on the system will be taken into account. Also, say the
system further has e.g. the Clang compiler, this will be tried out also, but
after any compilers specified in <code class="docutils literal notranslate"><span class="pre">compiler_precedence</span></code>.</p>
<p>The supported compilers â written in order of default precedence â are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">specified_mpi</span></code>: Use the compilers included in the MPI library
specified by <code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: Run as is, without altering the environment. If e.g. the <code class="docutils literal notranslate"><span class="pre">CC</span></code>
environment variable is set, this will probably be picked up by the
installation of the program.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gnu</span></code>: The GNU compilers (<code class="docutils literal notranslate"><span class="pre">gcc</span></code>, <code class="docutils literal notranslate"><span class="pre">g++</span></code>, <code class="docutils literal notranslate"><span class="pre">gfortran</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clang</span></code>: The Clang compilers (<code class="docutils literal notranslate"><span class="pre">clang</span></code>, <code class="docutils literal notranslate"><span class="pre">clang++</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi</span></code>: MPI compilers found on the system (<code class="docutils literal notranslate"><span class="pre">mpicc</span></code>, <code class="docutils literal notranslate"><span class="pre">mpicxx</span></code>,
<code class="docutils literal notranslate"><span class="pre">mpifort</span></code>, â¦).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intel</span></code>:  The Intel compilers (<code class="docutils literal notranslate"><span class="pre">icc</span></code>, <code class="docutils literal notranslate"><span class="pre">icpc</span></code>, <code class="docutils literal notranslate"><span class="pre">ifort</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cray</span></code>: The Cray compilers (<code class="docutils literal notranslate"><span class="pre">craycc</span></code>, <code class="docutils literal notranslate"><span class="pre">crayCC</span></code>, <code class="docutils literal notranslate"><span class="pre">crayftn</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">portland</span></code>: The Portland compilers (<code class="docutils literal notranslate"><span class="pre">pgcc</span></code>, <code class="docutils literal notranslate"><span class="pre">pgCC</span></code>,
<code class="docutils literal notranslate"><span class="pre">pgf77</span></code>, <code class="docutils literal notranslate"><span class="pre">pgf90</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generic</span></code>: Non-specific compilers found on the system (<code class="docutils literal notranslate"><span class="pre">cc</span></code>,
<code class="docutils literal notranslate"><span class="pre">c++</span></code>, <code class="docutils literal notranslate"><span class="pre">fortran</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unset</span></code>: Explicitly unset environment variables such as <code class="docutils literal notranslate"><span class="pre">CC</span></code>, <code class="docutils literal notranslate"><span class="pre">CXX</span></code>,
<code class="docutils literal notranslate"><span class="pre">FC</span></code>, and run without choosing any compiler.</p></li>
</ul>
<p>Many of the dependency programs do some compiler discovery of their own, and
so no guarantee of what compiler is actually used can be given.</p>
</section>
<section id="installing-mpich-or-openmpi">
<span id="id9"></span><h4>Installing MPICH or OpenMPI<a class="headerlink" href="#installing-mpich-or-openmpi" title="Permalink to this headline">ï</a></h4>
<p>If you let the <code class="docutils literal notranslate"><span class="pre">install</span></code> script install its own MPI library (i.e. leave
<code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code> unspecified), you may choose between MPICH and OpenMPI by setting
either <code class="docutils literal notranslate"><span class="pre">mpi=mpich</span></code> or <code class="docutils literal notranslate"><span class="pre">mpi=openmpi</span></code>. If <code class="docutils literal notranslate"><span class="pre">mpi</span></code> is left unset, MPICH is
installed. Note that the same variable <code class="docutils literal notranslate"><span class="pre">mpi_version</span></code> is used regardless of
which MPI implementation is used.</p>
</section>
<section id="parallel-builds">
<span id="id10"></span><h4>Parallel builds<a class="headerlink" href="#parallel-builds" title="Permalink to this headline">ï</a></h4>
<p>Much of the installation process can be sped up if we allow the Make tool
to build in parallel. This is controlled through the <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> variable.
To enforce serial builds, set <code class="docutils literal notranslate"><span class="pre">make_jobs=&quot;-j</span> <span class="pre">1&quot;</span></code>. To enforce parallel builds
using e.g. 2 processors, specify <code class="docutils literal notranslate"><span class="pre">make_jobs=&quot;-j</span> <span class="pre">2&quot;</span></code>. You can also specify an
unlimited amount of available parallel processors using just
<code class="docutils literal notranslate"><span class="pre">make_jobs=&quot;-j&quot;</span></code>.</p>
<p>By default, when <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> is not specified, unlimited parallel builds are
used if installing locally, while serial builds are used if working remotely.</p>
</section>
<section id="using-the-install-script-to-install-specific-libraries-but-not-concept-itself">
<h4>Using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script to install specific libraries but not CO<em>N</em>âCEPT itself<a class="headerlink" href="#using-the-install-script-to-install-specific-libraries-but-not-concept-itself" title="Permalink to this headline">ï</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> script may be used outside the context of CO<em>N</em>CEPT,
should you be in need of any of the dependencies for some other purpose. Which
programs to install is governed by <code class="docutils literal notranslate"><span class="pre">*_install</span></code> variables. By default,
<code class="docutils literal notranslate"><span class="pre">concept_install=True</span></code>, which in turn sets <code class="docutils literal notranslate"><span class="pre">*_install=True</span></code> for its
immediate dependencies, which in turn sets <code class="docutils literal notranslate"><span class="pre">*_install=True</span></code> for their
dependencies, and so on. If you run the <code class="docutils literal notranslate"><span class="pre">install</span></code> script with
<code class="docutils literal notranslate"><span class="pre">concept_install=False</span></code>, nothing will be installed.</p>
<p>To install e.g. just FFTW, use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">concept_install</span><span class="o">=</span>False<span class="w"> </span><span class="nv">fftw_install</span><span class="o">=</span>True<span class="w"> </span>bash<span class="w"> </span>install
</pre></div>
</div>
<p>possibly adding in a specific version (<code class="docutils literal notranslate"><span class="pre">fftw_version=...</span></code>) and an MPI
library (<code class="docutils literal notranslate"><span class="pre">mpi_dir=...</span></code> or <code class="docutils literal notranslate"><span class="pre">mpi_install=True</span></code>) to link against. As FFTW
does not absolutely need MPI, <code class="docutils literal notranslate"><span class="pre">mpi_install</span></code> is not set by having
<code class="docutils literal notranslate"><span class="pre">fftw_install=True</span></code>.</p>
<p>To install GADGET-2, use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">concept_install</span><span class="o">=</span>False<span class="w"> </span><span class="nv">gadget_install</span><span class="o">=</span>True<span class="w"> </span>bash<span class="w"> </span>install
</pre></div>
</div>
<p>This time, MPI, GSL and FFTW (2) will be installed as well, as these are hard
dependencies.</p>
</section>
</section>
</section>
<section id="dependencies">
<span id="id11"></span><h2><a class="toc-backref" href="#id23">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline">ï</a></h2>
<p>This entry lists the dependency stack of CO<em>N</em>CEPT. Knowledge about this
stack is not necessary if installing CO<em>N</em>CEPT using the <code class="docutils literal notranslate"><span class="pre">install</span></code>
script (which is <em>highly</em> recommended), but it is important if for some reason
you want to build (parts of) this stack yourself.</p>
<p>Typically, the exact version of any given dependency is not crucial. An effort
is made to ensure that CO<em>N</em>CEPT functions with recent stable versions of
each dependency. As many of the CO<em>N</em>CEPT dependencies also depend on
each other, finding a working set of dependency versions may be non-trivial.
You may draw inspiration from the current or older versions of the
<a class="reference external" href="https://github.com/jmd-dk/concept/blob/master/install">install script</a>
(look for âSpecification of software versionsâ).</p>
<section id="python-dependencies">
<h3><a class="toc-backref" href="#id24">Python dependencies</a><a class="headerlink" href="#python-dependencies" title="Permalink to this headline">ï</a></h3>
<p>The CO<em>N</em>CEPT source depends explicitly on
<a class="reference external" href="https://www.python.org/">Python</a> version 3.9 or newer, together with the
following Python packages (many of which have heavy dependencies of their
own):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cython.org/">Cython</a>: Needed for transpilation (<em>cythonization</em>)
of the pure Python source code of CO<em>N</em>CEPT into equivalent C code.</p></li>
<li><p><a class="reference external" href="https://www.numpy.org/">NumPy</a>: Provides the basic array types used for
representing all primary data, together with various array/math functions.</p></li>
<li><p><a class="reference external" href="https://www.scipy.org/">SciPy</a>: Provides various numerical methods and
additional math functions.</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/">Matplotlib</a>: Provides plotting functionality for
2D and 3D figures, as well as colour transformations used for coloured
terminal output.</p></li>
<li><p><a class="reference external" href="https://mpi4py.readthedocs.io/">MPI4Py</a>: Provides Python bindings for
<a class="reference external" href="https://en.wikipedia.org/wiki/Message_Passing_Interface">MPI</a>, used for
all inter-process communication.</p></li>
<li><p><a class="reference external" href="https://www.h5py.org/">H5Py</a>: Provides Python bindings for
<a class="reference external" href="https://www.hdfgroup.org/solutions/hdf5/">HDF5</a>, used for various binary
input/output.</p></li>
<li><p><a class="reference external" href="https://github.com/twiecki/CythonGSL">CythonGSL</a>: Provides Cython
bindings for <a class="reference external" href="https://www.gnu.org/software/gsl/">GSL</a>, used for more
performant replacements of some NumPy/SciPy functionalities when running
CO<em>N</em>CEPT in compiled mode.</p></li>
<li><p><a class="reference external" href="https://github.com/erikrose/blessings">Blessings</a>: Provides terminal
formatting.</p></li>
</ul>
<p>In addition, the <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a>,
<a class="reference external" href="https://sphinx-copybutton.readthedocs.io/">sphinx-copybutton</a>,
<a class="reference external" href="https://sphinx-rtd-theme.readthedocs.io/">sphinx-rtd-theme</a> and
<a class="reference external" href="https://github.com/djungelorm/sphinx-tabs/">sphinx-tabs</a> Python packages
are needed to build the documentation, but may otherwise be left out.</p>
</section>
<section id="other-primary-dependencies">
<h3><a class="toc-backref" href="#id25">Other primary dependencies</a><a class="headerlink" href="#other-primary-dependencies" title="Permalink to this headline">ï</a></h3>
<p>In addition to Python, the Python packages listed above and their respective
dependencies, CO<em>N</em>CEPT further depends explicitly on
<a class="reference external" href="http://www.fftw.org/">FFTW</a> 3 for its distributed FFT capabilities.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CO<em>N</em>CEPT does not make use of any standard Python bindings for FFTW
â such as <a class="reference external" href="https://github.com/pyFFTW/pyFFTW">pyFFTW</a> â as these
(at least traditionally) do not include the distributed (MPI)
FFTs required. Instead, CO<em>N</em>CEPT provides its own minimal wrapper,
<code class="docutils literal notranslate"><span class="pre">fft.c</span></code>. This is the only C file in the CO<em>N</em>CEPT source code.</p>
</div>
<p>If building FFTW yourself, remember to link against an MPI library. The same
goes for building HDF5 and installing MPI4Py and H5Py. Also, the MPI library
has to conform to the MPI-3 (or MPI-3.1) standard.</p>
<p>For testing, CO<em>N</em>CEPT compares itself against
<a class="reference external" href="https://wwwmpa.mpa-garching.mpg.de/gadget/">GADGET-2</a>, specifically version
2.0.7. When installing using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, GADGET-2 is patched in
order to increase the maximum allowed size of path names and slightly change
the values of various internal physical constants as to match the values
adopted by CO<em>N</em>CEPT. If you do not care about running the CO<em>N</em>CEPT
test suite, you do not have to install GADGET-2 at all.</p>
<p>The last non-standard dependency of CO<em>N</em>CEPT is the
<a class="reference external" href="http://class-code.net/">CLASS</a> code, along with its Python wrapper
âclassyâ. When installing using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, CLASS and classy are
patched in order to enable larger and new kinds of output, fix bugs and
improve interoperability with CO<em>N</em>CEPT (which includes (slight) changes
to internal values of physical constants, to match the values adopted by
CO<em>N</em>CEPT). If installing without the use of the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, you
will have to obtain the patched CLASS + classy by some other means. A good
solution is to install everything else first, including CO<em>N</em>CEPT itself,
and then make use of the CO<em>N</em>CEPT <code class="docutils literal notranslate"><span class="pre">update</span></code> utility to install and patch
CLASS + classy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./concept<span class="w"> </span>-u<span class="w"> </span>update<span class="w"> </span>--class<span class="w"> </span>&lt;version&gt;
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">&lt;version&gt;</span></code> should be replaced with the CO<em>N</em>CEPT version whose
<code class="docutils literal notranslate"><span class="pre">install</span></code> script should be used to install and patch CLASS + classy. Due to
the patching of CLASS + classy, only the specific CLASS version written in the
<code class="docutils literal notranslate"><span class="pre">install</span></code> script is likely to function. For CO<em>N</em>CEPT version 1.0,
this is CLASS version 2.7.2.</p>
</section>
<section id="system-dependencies">
<span id="id12"></span><h3><a class="toc-backref" href="#id26">System dependencies</a><a class="headerlink" href="#system-dependencies" title="Permalink to this headline">ï</a></h3>
<p>In addition to the many dependencies above, CO<em>N</em>CEPT further uses a lot
of <em>system dependencies</em>, by which is meant programs that are usually
installed system-wide. These are
<a class="reference external" href="https://www.gnu.org/software/bash/">Bash</a> 3.0 or newer and
<a class="reference external" href="https://www.gnu.org/software/coreutils/">GNU Core Utilities</a>. In addition,
the <a class="reference external" href="https://www.gnu.org/software/findutils/">GNU Find Utilities</a> are needed
for slimming down the installation, building the documentation and for
automated deployment. For just installing and running the code, the GNU Find
Utilities are not essential. All three of these system dependencies comes
pre-installed on the vast majority of Linux distributions. None of them will
be installed by the <code class="docutils literal notranslate"><span class="pre">install</span></code> script.</p>
<p>Other system dependencies needed for the core CO<em>N</em>CEPT functionality are
<a class="reference external" href="https://en.wikipedia.org/wiki/AWK">AWK</a>,
<a class="reference external" href="https://www.gnu.org/software/grep/">grep</a>
and <a class="reference external" href="https://www.gnu.org/software/sed/">sed</a>. Also, the <code class="docutils literal notranslate"><span class="pre">install</span></code> script
and <code class="docutils literal notranslate"><span class="pre">update</span></code> utility further makes use of
<a class="reference external" href="https://www.gnu.org/software/gzip/">Gzip</a>,
<a class="reference external" href="https://www.gnu.org/software/tar/">Tar</a>
and <a class="reference external" href="https://www.gnu.org/software/wget/">Wget</a>. That is, you may run
simulations without these last three components installed. If running the
<code class="docutils literal notranslate"><span class="pre">install</span></code> script or <code class="docutils literal notranslate"><span class="pre">update</span></code> utility without these, you will be prompted
for system-wide (root) installation.</p>
<p>Lastly, CO<em>N</em>CEPT needs standard tools for compiling and linking C (C99)
code. An <code class="docutils literal notranslate"><span class="pre">mpicc</span></code> C compiler/linker should be bundled with the MPI library
used. The <a class="reference external" href="https://www.gnu.org/software/make/">GNU Make</a> utility is
also needed.</p>
</section>
</section>
<section id="the-path-and-env-files">
<span id="id13"></span><h2><a class="toc-backref" href="#id27">The <code class="docutils literal notranslate"><span class="pre">.path</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> files</a><a class="headerlink" href="#the-path-and-env-files" title="Permalink to this headline">ï</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.path</span></code> file and the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file are special files storing static
information about the CO<em>N</em>CEPT installation. The <code class="docutils literal notranslate"><span class="pre">.path</span></code> file store
absolute paths to various files and directories, while the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file store
environment variables as they should be set when running CO<em>N</em>CEPT.</p>
<p>Both of these files are generated by the <code class="docutils literal notranslate"><span class="pre">install</span></code> script
during installation.
Should you wish to not use the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, you should grab <code class="docutils literal notranslate"><span class="pre">.path</span></code>
and <code class="docutils literal notranslate"><span class="pre">.env</span></code> from the <a class="reference external" href="https://github.com/jmd-dk/concept">online repository</a>
and edit them manually.</p>
<section id="the-path-file">
<h3><a class="toc-backref" href="#id28">The <code class="docutils literal notranslate"><span class="pre">.path</span></code> file</a><a class="headerlink" href="#the-path-file" title="Permalink to this headline">ï</a></h3>
<p>This is simply a Bash script of variable declarations, each variable storing
the absolute path to some file or directory. To install CO<em>N</em>CEPT without
the use of the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, you must manually set these paths.</p>
<p>From the comment above each variable within the file, exactly what each of
them refers to should be apparent. An exception is perhaps the many <code class="docutils literal notranslate"><span class="pre">mpi_*</span></code>
variables, which are explained below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mpi_dir</span></code> is the root directory for the MPI library, typically
containing the <code class="docutils literal notranslate"><span class="pre">bin</span></code>, <code class="docutils literal notranslate"><span class="pre">lib</span></code> and <code class="docutils literal notranslate"><span class="pre">include</span></code> subdirectories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi_compilerdir</span></code> is the directory that contains the MPI C compiler,
<code class="docutils literal notranslate"><span class="pre">mpicc</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi_bindir</span></code> is the directory that contains the MPI executable
<code class="docutils literal notranslate"><span class="pre">mpiexec</span></code>/<code class="docutils literal notranslate"><span class="pre">mpirun</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi_libdir</span></code> is the directory that contains MPI library files, e.g.
<code class="docutils literal notranslate"><span class="pre">libmpi.so</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi_includedir</span></code> is the directory that contains MPI header files, e.g.
<code class="docutils literal notranslate"><span class="pre">mpi.h</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi_symlinkdir</span></code> is an optional directory in which to put symbolic links
to MPI library files not present (or present under non-standard names) in
<code class="docutils literal notranslate"><span class="pre">mpi_libdir</span></code>, but needed when linking MPI programs. You do not necessarily
have to set this.</p></li>
</ul>
<p>In CO<em>N</em>CEPT parameter files, all variables defined in the <code class="docutils literal notranslate"><span class="pre">.path</span></code>
file are available through the <code class="docutils literal notranslate"><span class="pre">path</span></code> variable. To e.g. get the absolute
path to the <code class="docutils literal notranslate"><span class="pre">output</span></code> directory, you may use</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="o">.</span><span class="n">output_dir</span>
</pre></div>
</div>
<p>in your parameter file.</p>
<p>You are free to define further paths (or even variables in general) in the
<code class="docutils literal notranslate"><span class="pre">.path</span></code> file, in which case they two will be available in parameter files
via the <code class="docutils literal notranslate"><span class="pre">path</span></code> variable.</p>
</section>
<section id="the-env-file">
<h3><a class="toc-backref" href="#id29">The <code class="docutils literal notranslate"><span class="pre">.env</span></code> file</a><a class="headerlink" href="#the-env-file" title="Permalink to this headline">ï</a></h3>
<p>This file is meant to set up the required environment variables needed for
building and running CO<em>N</em>CEPT. It is
â<a class="reference external" href="https://en.wikipedia.org/wiki/Dot_(command)#Source">sourced</a>â by the
<code class="docutils literal notranslate"><span class="pre">concept</span></code> script before building and running the code.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Should you want the environment of your interactive shell to be populated
with the environment variables defined in <code class="docutils literal notranslate"><span class="pre">.env</span></code>, it is recommended to
âsourceâ the <code class="docutils literal notranslate"><span class="pre">concept</span></code> script, rather than the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file. This is
becasue the <code class="docutils literal notranslate"><span class="pre">concept</span></code> scritp further sets up the environment in ways that
are not meant to be user defined. You may need to do this e.g. before
invoking <code class="docutils literal notranslate"><span class="pre">make</span></code> directly.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.env</span></code> file is populated with <code class="docutils literal notranslate"><span class="pre">PATH</span></code>-like environment variables
present during installation, if using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script. On a cluster,
you typically âsourceâ scripts or load modules prior to the installation
itself in order to gain access to compilers and/or libraries. The intend is
for the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file to define all necessary environment variables, so that
the same âsourcingâ or module loading does not have to be repeated manually
before running CO<em>N</em>CEPT.</p>
<p>If you are installing CO<em>N</em>CEPT without the use of the <code class="docutils literal notranslate"><span class="pre">install</span></code> script
or some crucial part of the environment was not picked up during the
installation, you may add it yourself to the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file, i.e. place</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">name</span><span class="o">=</span><span class="s2">&quot;value&quot;</span>
</pre></div>
</div>
<p>somewhere in <code class="docutils literal notranslate"><span class="pre">.env</span></code> to make the variable <code class="docutils literal notranslate"><span class="pre">name</span></code> with value <code class="docutils literal notranslate"><span class="pre">value</span></code> be
part of the global CO<em>N</em>CEPT environment.</p>
<section id="path-like-environment-variables">
<h4><code class="docutils literal notranslate"><span class="pre">PATH</span></code>-like environment variables<a class="headerlink" href="#path-like-environment-variables" title="Permalink to this headline">ï</a></h4>
<p>Many environment variables (e.g. <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>) are
â<code class="docutils literal notranslate"><span class="pre">PATH</span></code>-likeâ, meaning that their values are colon-separated substrings.
Such environment variables are potentially dangerous to overwrite, so
instead they are merely updated by either prepending or appending new
substrings to their present value, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/some/new/path:</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># prepending</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:/some/new/path&quot;</span><span class="w">  </span><span class="c1"># appending</span>
</pre></div>
</div>
<p>The above syntax is allowed in <code class="docutils literal notranslate"><span class="pre">.env</span></code>. Equivalently, the
<code class="docutils literal notranslate"><span class="pre">pathenv_name_value_pairs_custom</span></code> array variable may be used;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">pathenv_name_value_pairs_custom</span><span class="o">=(</span>PATH<span class="w"> </span><span class="s2">&quot;/some/new/path&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>which either prepends or appends <code class="docutils literal notranslate"><span class="pre">/some/new/path</span></code> to <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, depending on
whether the <code class="docutils literal notranslate"><span class="pre">concatenate</span></code> variable in <code class="docutils literal notranslate"><span class="pre">.env</span></code> is set to <code class="docutils literal notranslate"><span class="pre">prepend</span></code> or
<code class="docutils literal notranslate"><span class="pre">append</span></code>.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script, any such <code class="docutils literal notranslate"><span class="pre">PATH</span></code>-like environment
variables present during install time will be placed in a similar array
structure. Whether these are prepended or appended to the pre-existing values
of the same <code class="docutils literal notranslate"><span class="pre">PATH</span></code>-like environment variables when building/running
CO<em>N</em>CEPT is similarly determined by <code class="docutils literal notranslate"><span class="pre">concatenate</span></code>.</p>
</section>
<section id="eliminating-interference-from-foreign-python-installations">
<span id="id14"></span><h4>Eliminating interference from foreign Python installations<a class="headerlink" href="#eliminating-interference-from-foreign-python-installations" title="Permalink to this headline">ï</a></h4>
<p>When using the <code class="docutils literal notranslate"><span class="pre">install</span></code> script and Python is installed as part of the
CO<em>N</em>CEPT installation (the default), the following lines are placed in
<code class="docutils literal notranslate"><span class="pre">.env</span></code> (see the
<a class="reference external" href="https://docs.python.org/3/using/cmdline.html#environment-variables">Python documentation</a>
for details):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">unset</span><span class="w"> </span>PYTHONPATH
<span class="nb">unset</span><span class="w"> </span>PYTHONHOME
<span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONNOUSERSITE</span><span class="o">=</span><span class="s2">&quot;True&quot;</span>
</pre></div>
</div>
<p>This is to eliminate any chance of interference from other Python
installations on the system. If you have installed CO<em>N</em>CEPT manually and
experience problems with Python (e.g. <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>), try adding the above
lines to the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file yourself.</p>
</section>
<section id="the-mpi-executor">
<h4>The <code class="docutils literal notranslate"><span class="pre">mpi_executor</span></code><a class="headerlink" href="#the-mpi-executor" title="Permalink to this headline">ï</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">mpi_executor</span></code> variable determines which program is responsible for
launching CO<em>N</em>CEPT as an MPI program, when submitted as a job on a remote
cluster. You may leave this empty or undefined in which case a (hopefully)
suitable value will be determined by the <code class="docutils literal notranslate"><span class="pre">concept</span></code> script.</p>
<p>After submitting a remote CO<em>N</em>CEPT job, see the <code class="docutils literal notranslate"><span class="pre">job/&lt;ID&gt;/jobscript</span></code>
for the chosen value of <code class="docutils literal notranslate"><span class="pre">mpi_executor</span></code>.</p>
<p>See <a class="reference internal" href="troubleshooting.html#chosing-an-mpi-executor"><span class="std std-ref">this</span></a> troubleshooting entry for further
details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an environment variable <code class="docutils literal notranslate"><span class="pre">mpi_executor</span></code> is set and non-empty, this
takes precedence over the <code class="docutils literal notranslate"><span class="pre">mpi_executor</span></code> set in the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file.</p>
</div>
</section>
<section id="the-make-jobs-environment-variable">
<h4>The <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> environment variable<a class="headerlink" href="#the-make-jobs-environment-variable" title="Permalink to this headline">ï</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> variable may be set in the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file in order to
specify whether CO<em>N</em>CEPT should be built in parallel. The default
behaviour is to build in parallel when working locally and build serially
when working remotely. To overrule this, add one of e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">make_jobs</span><span class="o">=</span><span class="s2">&quot;-j 1&quot;</span><span class="w">  </span><span class="c1"># always build serially</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">make_jobs</span><span class="o">=</span><span class="s2">&quot;-j 2&quot;</span><span class="w">  </span><span class="c1"># always build in parallel, using 2 cores</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">make_jobs</span><span class="o">=</span><span class="s2">&quot;-j&quot;</span><span class="w">    </span><span class="c1"># always build in parallel, using any number of cores</span>
</pre></div>
</div>
<p>to <code class="docutils literal notranslate"><span class="pre">.env</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an environment variable <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> is set and non-empty, this
takes precedence over the <code class="docutils literal notranslate"><span class="pre">make_jobs</span></code> set in the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file.</p>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">


    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>